{% extends 'base.html' %}
{% block content %}
<section class="predict-section">
  <div class="predict-layout">
    <!-- ===== Left Sticky SIM Panel ===== -->
    <aside class="sim-panel card glass">
      <h3 class="block-title">ðŸ“± SIM Provider</h3>
      <input type="hidden" name="sim" id="selectedSim">
      <div class="sim-options-vertical">
        <button type="button" class="sim-card" onclick="selectSim('Jio')">
          <img src="{{ url_for('static', filename='siva_image/jio.webp') }}" alt="Jio"><span>Jio</span>
        </button>
        <button type="button" class="sim-card" onclick="selectSim('Airtel')">
          <img src="{{ url_for('static', filename='siva_image/airtel.png') }}" alt="Airtel"><span>Airtel</span>
        </button>
        <button type="button" class="sim-card" onclick="selectSim('Vi')">
          <img src="{{ url_for('static', filename='siva_image/vi.webp') }}" alt="Vi"><span>Vi</span>
        </button>
        <button type="button" class="sim-card" onclick="selectSim('BSNL')">
          <img src="{{ url_for('static', filename='siva_image/bsnl.webp') }}" alt="BSNL"><span>BSNL</span>
        </button>
      </div>
    </aside>

    <!-- ===== Right Scrollable Form ===== -->
    <div class="form-container card glass">
      <form action="/predict" method="post" class="form-content">
        <div class="block">
          <h3 class="block-title">ðŸ‘¤ Customer Information</h3>
          <div class="grid">
            <label class="field"><span>Gender</span><select name="gender" required><option value="">Select</option><option>Male</option><option>Female</option></select></label>
            <label class="field"><span>Senior Citizen (0 or 1)</span><input type="number" name="SeniorCitizen" min="0" max="1" required></label>
            <label class="field"><span>Partner</span><select name="Partner"><option>Yes</option><option>No</option></select></label>
            <label class="field"><span>Dependents</span><select name="Dependents"><option>Yes</option><option>No</option></select></label>
          </div>
        </div>

        <div class="block">
          <h3 class="block-title">ðŸ§© Services Subscribed</h3>
          <div class="grid">
            <label class="field"><span>Phone Service</span><select name="PhoneService"><option>Yes</option><option>No</option></select></label>
            <label class="field"><span>Multiple Lines</span><select name="MultipleLines"><option>Yes</option><option>No</option><option>No phone service</option></select></label>
            <label class="field"><span>Internet Service</span><select name="InternetService"><option>DSL</option><option>Fiber optic</option><option>No</option></select></label>
            <label class="field"><span>Online Security</span><select name="OnlineSecurity"><option>Yes</option><option>No</option><option>No internet service</option></select></label>
            <label class="field"><span>Online Backup</span><select name="OnlineBackup"><option>Yes</option><option>No</option><option>No internet service</option></select></label>
            <label class="field"><span>Device Protection</span><select name="DeviceProtection"><option>Yes</option><option>No</option><option>No internet service</option></select></label>
            <label class="field"><span>Tech Support</span><select name="TechSupport"><option>Yes</option><option>No</option><option>No internet service</option></select></label>
            <label class="field"><span>Streaming TV</span><select name="StreamingTV"><option>Yes</option><option>No</option><option>No internet service</option></select></label>
            <label class="field"><span>Streaming Movies</span><select name="StreamingMovies"><option>Yes</option><option>No</option><option>No internet service</option></select></label>
          </div>
        </div>

        <div class="block">
          <h3 class="block-title">ðŸ’³ Billing & Contract</h3>
          <div class="grid">
            <label class="field"><span>Contract</span><select name="Contract"><option>Month-to-month</option><option>One year</option><option>Two year</option></select></label>
            <label class="field"><span>Paperless Billing</span><select name="PaperlessBilling"><option>Yes</option><option>No</option></select></label>
            <label class="field"><span>Payment Method</span><select name="PaymentMethod"><option>Electronic check</option><option>Mailed check</option><option>Bank transfer (automatic)</option><option>Credit card (automatic)</option></select></label>
          </div>
        </div>

        <div class="block">
          <h3 class="block-title">ðŸ“Š Tenure & Charges</h3>
          <div class="grid">
            <label class="field"><span>Tenure (Months Stayed)</span><input type="number" name="tenure" min="1" required></label>
            <label class="field"><span>Year Stayed</span><input type="number" name="YearStayed" required></label>
            <label class="field"><span>Monthly Charges</span><input type="number" step="0.01" name="MonthlyCharges_qt_outl" required></label>
            <label class="field"><span>Total Charges</span><input type="number" step="0.01" name="TotalCharges_qt_outl" required></label>
          </div>
        </div>

        <div class="actions">
          <button type="submit" class="btn">ðŸš€ Predict Churn</button>
        </div>
      </form>
    </div>
  </div>
</section>

<script>
function selectSim(simName) {
  document.getElementById('selectedSim').value = simName;
  document.querySelectorAll('.sim-card').forEach(c => c.classList.remove('active'));
  const selected = Array.from(document.querySelectorAll('.sim-card')).find(c => c.innerText.trim() === simName);
  if (selected) selected.classList.add('active');
}
</script>

<style>
/* ===== Global Layout Reset ===== */
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  font-family: 'Inter', system-ui, Arial, sans-serif;
  background: linear-gradient(135deg, #eaf3ff, #f5f9ff);
}

/* ===== Section Layout ===== */
.predict-section {
  width: 100%;
  height: calc(100vh - 70px); /* adjusts for navbar */
  display: flex;
}

.predict-layout {
  display: grid;
  grid-template-columns: 270px auto; /* left sticky + form */
  width: 100%;
  height: 100%;
  gap: 0;
}

/* ===== Left Sticky SIM Panel ===== */
.sim-panel {
  position: sticky;
  top: 70px;
  height: calc(100vh - 90px);
  text-align: center;
  padding: 1.2rem 0.8rem;
  overflow-y: auto;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(8px);
  box-shadow: 4px 0 12px rgba(0, 0, 0, 0.05);
  border-right: 1px solid rgba(0, 0, 0, 0.05);
}

.sim-panel::-webkit-scrollbar {
  width: 6px;
}
.sim-panel::-webkit-scrollbar-thumb {
  background: #c9dafb;
  border-radius: 10px;
}

/* SIM Cards */
.sim-options-vertical {
  display: flex;
  flex-direction: column;
  gap: 1.2rem;
  align-items: center;
  margin-top: 1.2rem;
}

.sim-card {
  width: 100%;
  max-width: 170px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 1rem;
  border: 3px solid #e0e0e0;
  border-radius: 16px;
  background: #fff;
  cursor: pointer;
  transition: 0.3s;
  font-weight: 600;
  box-shadow: 0 4px 14px rgba(0,0,0,0.05);
}

.sim-card img {
  width: 70px;
  height: 70px;
}

.sim-card span {
  font-size: 1rem;
  color: #004aad;
  letter-spacing: 0.3px;
}

.sim-card:hover {
  transform: scale(1.06);
}

.sim-card.active {
  border-color: #007bff;
  background: #e8f2ff;
  box-shadow: 0 0 14px rgba(0,123,255,0.4);
}

/* ===== Right Scrollable Form Container ===== */
.form-container {
  width: 100%;
  height: calc(100vh - 90px);
  overflow-y: auto;
  padding: 1.8rem 2.2rem;
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(10px);
}

.form-container::-webkit-scrollbar {
  width: 8px;
}
.form-container::-webkit-scrollbar-thumb {
  background: #b5c9f2;
  border-radius: 10px;
}

/* ===== Form Content ===== */
.block {
  margin-bottom: 1.5rem;
}

.block-title {
  color: #007bff;
  border-bottom: 2px solid #007bff;
  padding-bottom: 4px;
  margin-bottom: 1rem;
  font-size: 1.1rem;
  font-weight: 600;
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 1rem;
}

.field {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.field input,
.field select {
  padding: 0.6rem 0.7rem;
  border-radius: 8px;
  border: 1px solid #ccc;
  background: #fff;
  font-size: 0.95rem;
  transition: 0.2s;
}

.field input:focus,
.field select:focus {
  border-color: #007bff;
  box-shadow: 0 0 6px rgba(0,123,255,0.3);
  outline: none;
}

.actions {
  text-align: center;
  margin-top: 2rem;
}

.btn {
  padding: 0.9rem 2.4rem;
  background: linear-gradient(90deg, #004aad, #00c6ff);
  border: none;
  color: #fff;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: 0.3s;
  font-size: 1rem;
}

.btn:hover {
  transform: scale(1.05);
  background: linear-gradient(90deg, #003b99, #00aaff);
}

/* ===== Scrollbars ===== */
::-webkit-scrollbar {
  width: 8px;
}
::-webkit-scrollbar-thumb {
  background: #c0d6ff;
  border-radius: 10px;
}

/* ===== Responsive Design ===== */
@media (max-width: 900px) {
  html, body {
    overflow: auto;
  }
  .predict-layout {
    grid-template-columns: 1fr;
    height: auto;
  }
  .sim-panel {
    position: relative;
    height: auto;
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 0.8rem;
    padding: 1rem;
    margin-bottom: 1rem;
    box-shadow: none;
    border-right: none;
    border-bottom: 1px solid rgba(0,0,0,0.1);
  }
  .sim-card {
    max-width: 150px;
    padding: 0.8rem;
  }
  .sim-card img {
    width: 60px;
    height: 60px;
  }
  .form-container {
    height: auto;
    overflow: visible;
    padding: 1rem;
  }
}
</style>

{% endblock %}
